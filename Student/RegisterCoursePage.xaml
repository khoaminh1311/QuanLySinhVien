<Page x:Class="InterfaceSinhVien.RegisterCoursePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Đăng ký môn học" Background="White">

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,25">
            <TextBlock Text="Đăng ký môn học" FontSize="24" FontWeight="Bold" Foreground="#1E293B"/>
            <TextBlock Text="Tìm kiếm và đăng ký các lớp học phần mở" FontSize="14" Foreground="#64748B" Margin="0,5,0,0"/>
        </StackPanel>

        <Grid Grid.Row="1" Margin="0,0,0,25">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="150"/>
            </Grid.ColumnDefinitions>

            <TextBox x:Name="txtSearch" Style="{StaticResource ModernTextBox}" 
                     Tag="Nhập mã môn hoặc tên môn..." Margin="0,0,15,0"/>

            <Button Grid.Column="1" Content="🔍 Tìm kiếm" Click="BtnSearch_Click" 
                    Style="{StaticResource PrimaryBtnStyle}"/>
        </Grid>

        <DataGrid x:Name="dgLopHoc" Grid.Row="2" Style="{StaticResource ModernDataGrid}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Mã Lớp" Binding="{Binding MaLop}" Width="1.5*" FontWeight="SemiBold"/>
                <DataGridTextColumn Header="Tên Môn" Binding="{Binding TenMon}" Width="3*"/>
                <DataGridTextColumn Header="Phòng" Binding="{Binding Phong}" Width="*"/>
                <DataGridTextColumn Header="Lịch học" Binding="{Binding LichHoc}" Width="2*"/>

                <DataGridTemplateColumn Header="Trạng thái" Width="1.5*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Background="#F1F5F9" CornerRadius="4" Padding="8,2" HorizontalAlignment="Left">
                                <TextBlock Text="{Binding TrangThai}" Foreground="{Binding MauTrangThai}" FontSize="12"/>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTemplateColumn Header="Thao tác" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Đăng ký" Click="BtnDangKy_Click" Tag="{Binding MaLop}"
                                    Background="#22C55E" Foreground="White" FontWeight="Bold"
                                    Padding="10,5" BorderThickness="0" Cursor="Hand">
                                <Button.Resources>
                                    <Style TargetType="Border">
                                        <Setter Property="CornerRadius" Value="4"/>
                                    </Style>
                                </Button.Resources>
                            </Button>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Page>